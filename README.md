# ğŸš€ Mocaca æ™ºèƒ½è§†é¢‘ç®¡ç†å¹³å°

<div align="center">
  <img src="https://img.shields.io/badge/Vue-3-green" alt="Vue3">
  <img src="https://img.shields.io/badge/Flask-2.3-blue" alt="Flask">
  <img src="https://img.shields.io/badge/Docker-å¤šæ¶æ„æ”¯æŒ-blueviolet" alt="Docker">
</div>

## âœ¨ æ ¸å¿ƒç‰¹è‰²åŠŸèƒ½

### ğŸš€ é«˜æ€§èƒ½æ— é™æµä½“éªŒ
- **æ™ºèƒ½åˆ†é¡µåŠ è½½**ï¼šæ”¯æŒ1000+è§†é¢‘æµç•…æµè§ˆï¼Œé¿å…å†…å­˜ç“¶é¢ˆ
- **åç«¯å¯¼èˆªä¼˜åŒ–**ï¼šAPIè®¡ç®—å¯¼èˆªå…³ç³»ï¼Œç¡®ä¿å¤§é‡è§†é¢‘çš„æµç•…åˆ‡æ¢
- **æ— é™æ»šåŠ¨è®¾è®¡**ï¼šæ”¶è—åˆ—è¡¨å’Œå‘ç°é¡µé¢å®Œç¾æ”¯æŒæ— é™æ»šåŠ¨
- **è¾¹ç•Œæ™ºèƒ½æç¤º**ï¼šå‘ç°é¡µé¢200è§†é¢‘è¾¹ç•Œè‡ªåŠ¨æç¤ºåˆ·æ–°

### ğŸ¯ æ™ºèƒ½æ’­æ”¾ä¸æ‰‹åŠ¿æ§åˆ¶
- **é•¿æŒ‰2å€é€Ÿæ’­æ”¾**ï¼šé•¿æŒ‰è§†é¢‘åŒºåŸŸ2å€é€Ÿï¼Œé‡Šæ”¾æ¢å¤åŸé€Ÿ
- **æ»‘åŠ¨è¿›åº¦æ§åˆ¶**ï¼šæ°´å¹³æ»‘åŠ¨å¿«è¿›/å¿«é€€ï¼Œå‚ç›´æ»‘åŠ¨åˆ‡æ¢è§†é¢‘
- **æ™ºèƒ½æ‰‹åŠ¿è¯†åˆ«**ï¼šç²¾ç¡®è¯†åˆ«å¤šç§æ‰‹åŠ¿æ“ä½œï¼Œæä¾›ç›´è§‚äº¤äº’
- **è‡ªåŠ¨è¿ç»­æ’­æ”¾**ï¼šè§†é¢‘ç»“æŸåè‡ªåŠ¨æ’­æ”¾ä¸‹ä¸€ä¸ªï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œ

### ğŸ”„ æ’­æ”¾åˆ—è¡¨ä¸ä¸ªæ€§åŒ–
- **å¤šæºè§†é¢‘å¯¼èˆª**ï¼šæ”¯æŒæ”¶è—åˆ—è¡¨ã€å‘ç°é¡µé¢ã€æ’­æ”¾åˆ—è¡¨å¤šç§æ¥æº
- **ä¸Šä¸‹æ–‡ä¿æŒå¯¼èˆª**ï¼šæ’­æ”¾è¿‡ç¨‹ä¸­ä¿æŒæ¥æºé¡µé¢ä¸Šä¸‹æ–‡
- **æ”¶è—ä¸æƒ…æ„Ÿåé¦ˆ**ï¼šæ”¶è—åŠŸèƒ½å’Œç‹¬ç‰¹çš„"è®¨åŒ"åŠŸèƒ½ï¼Œæ”¯æŒæ‰¹é‡æ¸…ç†
- **ç”¨æˆ·çŠ¶æ€åŒæ­¥**ï¼šå®æ—¶åŒæ­¥æ”¶è—å’Œè®¨åŒçŠ¶æ€ï¼Œæ”¯æŒå¤šç”¨æˆ·ç¯å¢ƒ

### ğŸ“º åª’ä½“ç®¡ç†ä¸éƒ¨ç½²
- **è‡ªåŠ¨ç¼©ç•¥å›¾ç”Ÿæˆ**ï¼šFFmpegå®æ—¶ç”Ÿæˆç¼©ç•¥å›¾ï¼Œæå‡æµè§ˆä½“éªŒ
- **æ–‡ä»¶ç³»ç»Ÿç›‘æ§**ï¼šå®æ—¶åŒæ­¥åª’ä½“æ–‡ä»¶å˜åŒ–ï¼Œè‡ªåŠ¨æ›´æ–°æ’­æ”¾åˆ—è¡¨
- **å¤šæ¶æ„å®¹å™¨æ”¯æŒ**ï¼šARM/x86å®Œæ•´æ”¯æŒï¼ŒDockerä¸€é”®éƒ¨ç½²
- **æŒç»­é›†æˆå‘å¸ƒ**ï¼šGitHub Actionsè‡ªåŠ¨åŒ–æ„å»ºå‘å¸ƒ

### ğŸ› ï¸ æŠ€æœ¯æ¶æ„
```mermaid
graph TD
  A[Vue3å‰ç«¯] -->|HTTP API| B[Flaskåç«¯]
  B -->|SQL| C[(SQLite)]
  C -->|æ•°æ®åŒæ­¥| D[åª’ä½“æ–‡ä»¶ç³»ç»Ÿ]
  B -->|FFmpeg| E[ç¼©ç•¥å›¾ç”Ÿæˆ]
  A -->|è§¦æ‘¸äº‹ä»¶| F[æ‰‹åŠ¿äº¤äº’]
```

## ğŸ¯ æœ€æ–°ä¼˜åŒ–ç‰¹æ€§

### ğŸ”„ æ”¶è—åˆ—è¡¨æ€§èƒ½ä¼˜åŒ–
- **åç«¯åˆ†é¡µAPI**ï¼šæ”¶è—APIæ”¯æŒ`page`å’Œ`per_page`å‚æ•°ï¼Œé¿å…ä¸€æ¬¡æ€§åŠ è½½å¤§é‡æ•°æ®
- **æ™ºèƒ½å¯¼èˆªAPI**ï¼šæ–°å¢`/api/favorites/navigation/{video_id}`æ¥å£ï¼Œæä¾›æ”¶è—åˆ—è¡¨ä¸­çš„ä¸Šä¸‹è§†é¢‘å¯¼èˆª
- **å‰ç«¯æ— é™æ»šåŠ¨**ï¼šæ”¶è—é¡µé¢æ”¯æŒæ»šåŠ¨åˆ°åº•éƒ¨è‡ªåŠ¨åŠ è½½æ›´å¤šå†…å®¹
- **å†…å­˜ä¼˜åŒ–**ï¼šæ’­æ”¾å™¨ä½¿ç”¨åç«¯å¯¼èˆªAPIï¼Œä¸å†å‰ç«¯å­˜å‚¨æ•´ä¸ªæ”¶è—åˆ—è¡¨

### ğŸ“Š æ’­æ”¾åˆ—è¡¨å¯¼èˆªä¼˜åŒ–
- **å‘ç°é¡µé¢éšæœºåˆ—è¡¨**ï¼šå›ºå®š200ä¸ªè§†é¢‘é™åˆ¶ï¼Œåˆ°è¾¾è¾¹ç•Œæ—¶æç¤ºåˆ·æ–°
- **æœ€æ–°é¡µé¢å¯¼èˆª**ï¼šä½¿ç”¨åç«¯å¯¼èˆªAPIï¼Œæ”¯æŒ1000+è§†é¢‘çš„æµç•…å¯¼èˆª
- **æ”¶è—åˆ—è¡¨å¯¼èˆª**ï¼šæŒ‰æ”¶è—æ—¶é—´å€’åºæ’åˆ—ï¼Œç¡®ä¿å¯¼èˆªé¡ºåºä¸€è‡´æ€§

### ğŸš€ æ€§èƒ½æå‡äº®ç‚¹
- **åˆ†é¡µåŠ è½½**ï¼šæ‰€æœ‰åˆ—è¡¨é¡µé¢å‡é‡‡ç”¨åˆ†é¡µæœºåˆ¶ï¼Œå‡å°‘å†…å­˜å ç”¨
- **åç«¯è®¡ç®—**ï¼šå¯¼èˆªå…³ç³»ç”±åç«¯è®¡ç®—ï¼Œé¿å…å‰ç«¯æ€§èƒ½ç“¶é¢ˆ
- **ç¼“å­˜ä¼˜åŒ–**ï¼šæ™ºèƒ½ç¼“å­˜ç®¡ç†ï¼Œæå‡é‡å¤è®¿é—®æ€§èƒ½

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å¼€å‘ç¯å¢ƒè¿è¡Œ
```bash
# å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
cd frontend && npm run dev

# å¯åŠ¨åç«¯æœåŠ¡
cd backend && flask run
```

### ğŸ³ Docker éƒ¨ç½²

#### ç”Ÿäº§ç¯å¢ƒé…ç½®ï¼ˆä½¿ç”¨DockerHubé•œåƒï¼‰
```yaml
version: "3.8"
services:
  mocaca-backend:
    image: aidedaijiayang/mocaca-backend:latest
    container_name: mocaca-backend
    ports:
      - 5003:5003
    volumes:
      # æ•°æ®åº“æ–‡ä»¶ä½ç½®
      - ./data:/app/instance
      # ç¼©ç•¥å›¾ä½ç½®
      - ./pic:/app/thumbnails
      # åª’ä½“ä½ç½®ï¼Œå¤šç£ç›˜ç›®å½•ï¼Œå¯ä»¥æ˜ å°„åˆ°mediaå­ç›®å½•
      - ./media:/app/media
    environment:
      - PUID=1000
      - PGID=100
      - TZ=Asia/Shanghai
      - MEDIA_FOLDER=/app/media
      - THUMBNAIL_FOLDER=/app/thumbnails
    networks:
      - mocaca-network
    restart: unless-stopped
  mocaca-frontend:
    image: aidedaijiayang/mocaca-frontend:latest
    container_name: mocaca-frontend
    ports:
      - 5173:80
    depends_on:
      - mocaca-backend
    networks:
      - mocaca-network
    restart: unless-stopped
networks:
  mocaca-network:
    driver: bridge
```

#### éƒ¨ç½²å‘½ä»¤
```bash
# å¼€å‘ç¯å¢ƒæ„å»ºéƒ¨ç½²
docker-compose up -d --build

# ç”Ÿäº§ç¯å¢ƒä½¿ç”¨é•œåƒéƒ¨ç½²ï¼ˆæ¨èï¼‰
docker-compose -f docker-compose.prod.yml up -d

# å¤šæ¶æ„é•œåƒæ„å»ºï¼ˆæ”¯æŒARM/X86ï¼‰
./build-multiarch-images.sh

# æ¨é€åˆ°DockerHub
./publish-dockerhub.sh
```

## ğŸ“Œ è®¾è®¡ç†å¿µ

1. **ç”¨æˆ·ä¸ºä¸­å¿ƒ**  
   ä¸“æ³¨äºæä¾›ç›´è§‚ã€è‡ªç„¶çš„è§†é¢‘äº¤äº’ä½“éªŒ

2. **ç®€æ´é«˜æ•ˆ**  
   å»é™¤å¤æ‚æ“ä½œï¼Œè®©è§†é¢‘è§‚çœ‹å›å½’çº¯ç²¹

3. **æŠ€æœ¯å®ç”¨**  
   é€‰æ‹©æˆç†Ÿç¨³å®šçš„æŠ€æœ¯æ ˆï¼Œç¡®ä¿ç³»ç»Ÿå¯é æ€§

4. **æŒç»­è¿­ä»£**  
   åŸºäºç”¨æˆ·åé¦ˆä¸æ–­ä¼˜åŒ–åŠŸèƒ½å’Œä½“éªŒ
