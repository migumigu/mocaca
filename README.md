# ğŸš€ Mocaca æ™ºèƒ½è§†é¢‘ç®¡ç†å¹³å°

<div align="center">
  <img src="https://img.shields.io/badge/Vue-3-green" alt="Vue3">
  <img src="https://img.shields.io/badge/Flask-2.3-blue" alt="Flask">
  <img src="https://img.shields.io/badge/Docker-å¤šæ¶æ„æ”¯æŒ-blueviolet" alt="Docker">
</div>

## âœ¨ æ ¸å¿ƒç‰¹è‰²åŠŸèƒ½

### ğŸ¯ æ™ºèƒ½è§†é¢‘æ’­æ”¾ä½“éªŒ
- **é•¿æŒ‰2å€é€Ÿæ’­æ”¾**  
  ğŸ‘† é•¿æŒ‰è§†é¢‘åŒºåŸŸå³å¯2å€é€Ÿæ’­æ”¾ï¼Œé‡Šæ”¾æ‰‹æŒ‡æ¢å¤åŸé€Ÿ
- **æ»‘åŠ¨è¿›åº¦æ§åˆ¶**  
  â†”ï¸ æ°´å¹³æ»‘åŠ¨å¿«è¿›/å¿«é€€ï¼Œâ†•ï¸ å‚ç›´æ»‘åŠ¨åˆ‡æ¢è§†é¢‘
- **ç»¿è‰²é—ªç”µè£‚ç—•å¿ƒå½¢å›¾æ ‡**  
  ğŸ’š è®¨åŒåŠŸèƒ½ï¼Œé…åˆè®¨åŒä¸€é”®æ‰¹é‡åˆ é™¤åŠŸèƒ½ï¼Œå®ç°æ‰¹é‡æ¸…ç†ä¸éœ€è¦çš„è§†é¢‘æ–‡ä»¶

### ğŸ”„ æ™ºèƒ½æ’­æ”¾åˆ—è¡¨ç®¡ç†
- **å¤šæºè§†é¢‘å¯¼èˆª**  
  ğŸ“± æ”¯æŒä»æ”¶è—åˆ—è¡¨ã€å‘ç°é¡µé¢ã€æ’­æ”¾åˆ—è¡¨ç­‰å¤šç§æ¥æºè¿›å…¥æ’­æ”¾å™¨
- **ä¸Šä¸‹æ–‡ä¿æŒå¯¼èˆª**  
  ğŸ”„ æ’­æ”¾è¿‡ç¨‹ä¸­ä¿æŒæ¥æºé¡µé¢ä¸Šä¸‹æ–‡ï¼Œè¿”å›æ—¶æ™ºèƒ½è·³è½¬
- **è‡ªåŠ¨è¿ç»­æ’­æ”¾**  
  â–¶ï¸ è§†é¢‘æ’­æ”¾ç»“æŸåè‡ªåŠ¨æ’­æ”¾ä¸‹ä¸€ä¸ªï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œ

### â¤ï¸ ä¸ªæ€§åŒ–äº¤äº’åŠŸèƒ½
- **æ”¶è—ç®¡ç†**  
  â­ æ”¯æŒè§†é¢‘æ”¶è—åŠŸèƒ½ï¼Œåˆ›å»ºä¸ªäººä¸“å±æ’­æ”¾åˆ—è¡¨
- **æƒ…æ„Ÿåé¦ˆ**  
  ğŸ’” ç‹¬ç‰¹çš„"è®¨åŒ"åŠŸèƒ½ï¼Œæä¾›æƒ…æ„ŸåŒ–äº¤äº’ä½“éªŒ
- **ç”¨æˆ·çŠ¶æ€åŒæ­¥**  
  ğŸ”„ å®æ—¶åŒæ­¥æ”¶è—å’Œè®¨åŒçŠ¶æ€ï¼Œæ”¯æŒå¤šç”¨æˆ·ç¯å¢ƒ

### ğŸ® é«˜çº§æ’­æ”¾æ§åˆ¶
- **æ™ºèƒ½æ‰‹åŠ¿è¯†åˆ«**  
  ğŸ‘Œ ç²¾ç¡®è¯†åˆ«é•¿æŒ‰ã€æ»‘åŠ¨ç­‰å¤šç§æ‰‹åŠ¿æ“ä½œ
- **å®æ—¶è¿›åº¦é¢„è§ˆ**  
  â±ï¸ æ»‘åŠ¨å¿«è¿›æ—¶æ˜¾ç¤ºå®æ—¶æ—¶é—´è¿›åº¦å’Œå¿«è¿›é‡
- **æ— ç¼è§†é¢‘åˆ‡æ¢**  
  ğŸ”„ æµç•…çš„æ»‘åŠ¨åˆ‡æ¢åŠ¨ç”»ï¼Œæ”¯æŒä¸Šä¸‹æ–¹å‘å¯¼èˆª

### ğŸ›¡ï¸ ç”¨æˆ·ä½“éªŒä¼˜åŒ–
- **é˜»æ­¢ä¸‹è½½èœå•**  
  ğŸš« æ™ºèƒ½é˜»æ­¢è§†é¢‘é•¿æŒ‰ä¸‹è½½èœå•å¼¹å‡º
- **è‡ªåŠ¨æ’­æ”¾ä¼˜åŒ–**  
  ğŸ”„ æ™ºèƒ½å¤„ç†æµè§ˆå™¨è‡ªåŠ¨æ’­æ”¾ç­–ç•¥
- **åŠ è½½çŠ¶æ€ç®¡ç†**  
  â³ å®Œå–„çš„åŠ è½½çŠ¶æ€æŒ‡ç¤ºå’Œé”™è¯¯å¤„ç†

### ğŸ“º åª’ä½“ç®¡ç†åŠŸèƒ½
- **è‡ªåŠ¨ç¼©ç•¥å›¾ç”Ÿæˆ**  
  ğŸ–¼ï¸ FFmpegè‡ªåŠ¨å¤„ç†è§†é¢‘ç¼©ç•¥å›¾ï¼Œæå‡æµè§ˆä½“éªŒã€‚å½“å‰ä¸ºå®æ—¶ç”Ÿæˆï¼Œä¸ä¼šå¼ºè¡Œæ‰«åº“ã€‚åç»­è€ƒè™‘åŠå¤œæ‰«åº“ç”Ÿæˆã€‚
- **æ–‡ä»¶ç³»ç»Ÿç›‘æ§**  
  ğŸ“ å®æ—¶åŒæ­¥åª’ä½“æ–‡ä»¶å˜åŒ–ï¼Œè‡ªåŠ¨æ›´æ–°æ’­æ”¾åˆ—è¡¨
- **å¤šæ ¼å¼è§†é¢‘æ”¯æŒ**  
  ğŸ¬ ä¸»æµè§†é¢‘æ ¼å¼å…¼å®¹æ’­æ”¾ï¼Œæ— éœ€æ ¼å¼è½¬æ¢

### ğŸš€ éƒ¨ç½²è¿ç»´ç‰¹æ€§
- **å¤šæ¶æ„å®¹å™¨æ”¯æŒ**  
  ğŸ³ ARMå’Œx86æ¶æ„å®Œæ•´æ”¯æŒï¼Œè·¨å¹³å°éƒ¨ç½²æ— å¿§
- **ä¸€é”®å®¹å™¨åŒ–éƒ¨ç½²**  
  âš¡ Dockerä¸€é”®éƒ¨ç½²ï¼Œç¯å¢ƒéš”ç¦»ï¼Œé…ç½®ç®€å•
- **æŒç»­é›†æˆå‘å¸ƒ**  
  ğŸ”„ GitHub Actionsè‡ªåŠ¨åŒ–æ„å»ºå‘å¸ƒï¼Œç‰ˆæœ¬ç®¡ç†è§„èŒƒ

### ğŸ› ï¸ æŠ€æœ¯æ¶æ„
```mermaid
graph TD
  A[Vue3å‰ç«¯] -->|HTTP API| B[Flaskåç«¯]
  B -->|SQL| C[(SQLite)]
  C -->|æ•°æ®åŒæ­¥| D[åª’ä½“æ–‡ä»¶ç³»ç»Ÿ]
  B -->|FFmpeg| E[ç¼©ç•¥å›¾ç”Ÿæˆ]
  A -->|è§¦æ‘¸äº‹ä»¶| F[æ‰‹åŠ¿äº¤äº’]
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å¼€å‘ç¯å¢ƒè¿è¡Œ
```bash
# å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
cd frontend && npm run dev

# å¯åŠ¨åç«¯æœåŠ¡
cd backend && flask run
```

### ğŸ³ Docker éƒ¨ç½²

#### ç”Ÿäº§ç¯å¢ƒé…ç½®ï¼ˆä½¿ç”¨DockerHubé•œåƒï¼‰
```yaml
version: "3.8"
services:
  mocaca-backend:
    image: aidedaijiayang/mocaca-backend:latest
    container_name: mocaca-backend
    ports:
      - 5003:5003
    volumes:
      # æ•°æ®åº“æ–‡ä»¶ä½ç½®
      - ./data:/app/instance
      # ç¼©ç•¥å›¾ä½ç½®
      - ./pic:/app/thumbnails
      # åª’ä½“ä½ç½®ï¼Œå¤šç£ç›˜ç›®å½•ï¼Œå¯ä»¥æ˜ å°„åˆ°mediaå­ç›®å½•
      - ./media:/app/media
    environment:
      - PUID=1000
      - PGID=100
      - TZ=Asia/Shanghai
      - MEDIA_FOLDER=/app/media
      - THUMBNAIL_FOLDER=/app/thumbnails
    networks:
      - mocaca-network
    restart: unless-stopped
  mocaca-frontend:
    image: aidedaijiayang/mocaca-frontend:latest
    container_name: mocaca-frontend
    ports:
      - 5173:80
    depends_on:
      - mocaca-backend
    networks:
      - mocaca-network
    restart: unless-stopped
networks:
  mocaca-network:
    driver: bridge
```

#### éƒ¨ç½²å‘½ä»¤
```bash
# å¼€å‘ç¯å¢ƒæ„å»ºéƒ¨ç½²
docker-compose up -d --build

# ç”Ÿäº§ç¯å¢ƒä½¿ç”¨é•œåƒéƒ¨ç½²ï¼ˆæ¨èï¼‰
docker-compose -f docker-compose.prod.yml up -d

# å¤šæ¶æ„é•œåƒæ„å»ºï¼ˆæ”¯æŒARM/X86ï¼‰
./build-multiarch-images.sh

# æ¨é€åˆ°DockerHub
./publish-dockerhub.sh
```

## ğŸ“Œ è®¾è®¡ç†å¿µ

1. **ç”¨æˆ·ä¸ºä¸­å¿ƒ**  
   ä¸“æ³¨äºæä¾›ç›´è§‚ã€è‡ªç„¶çš„è§†é¢‘äº¤äº’ä½“éªŒ

2. **ç®€æ´é«˜æ•ˆ**  
   å»é™¤å¤æ‚æ“ä½œï¼Œè®©è§†é¢‘è§‚çœ‹å›å½’çº¯ç²¹

3. **æŠ€æœ¯å®ç”¨**  
   é€‰æ‹©æˆç†Ÿç¨³å®šçš„æŠ€æœ¯æ ˆï¼Œç¡®ä¿ç³»ç»Ÿå¯é æ€§

4. **æŒç»­è¿­ä»£**  
   åŸºäºç”¨æˆ·åé¦ˆä¸æ–­ä¼˜åŒ–åŠŸèƒ½å’Œä½“éªŒ
